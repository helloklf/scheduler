{
  "friendly": "原神",
  "call": [
    ["$mi_thermal", "13"],
    ["@high_rate", "off", "3000"],
    ["@cpuset", "0", "0", "0-5", "0-7"],
    ["@uclamp", "0.00~max", "0.00~max", "0.00~max"],
    ["@preset", "cores_force_on"]
  ],
  "limiters": [
    {"id": "ys-powersave:cpu4", "step_shift": -1, "max_freq": 1766400, "margin_mhz": 210, "smoothness": 6},
    {"id": "ys-powersave:cpu7", "step_shift": -1, "max_freq": 1785600, "margin_mhz": 200, "smoothness": 6},

    {"id": "ys-balance:cpu4", "step_shift": -1, "max_freq": 1996800, "min_freq": 1440000, "margin_mhz": 220, "smoothness": 6},
    {"id": "ys-balance:cpu7", "step_shift": -1, "max_freq": 2035200, "min_freq": 1420800, "margin_mhz": 200, "smoothness": 6},

    {"id": "ys-performance:cpu4", "step_shift": -1, "max_freq": 2227200, "min_freq": 1670400, "margin_mhz": 220, "smoothness": 6},
    {"id": "ys-performance:cpu7", "step_shift": -1, "boost_freq": 2496000, "max_freq": 2265600, "min_freq": 1670400, "margin_mhz": 200, "smoothness": 6},

    {"id": "ys-fast:cpu4", "boost_freq": 2419200,  "max_freq": 2227200, "min_freq": 1766400, "margin_mhz": 355, "smoothness": 6},
    {"id": "ys-fast:cpu7", "boost_freq": 2841600, "max_freq": 2496000, "min_freq": 1785600, "margin_mhz": 350, "smoothness": 4}
  ],
  "_affinity": {
    "unity_main": "80",
    "comm": {
      "40": ["UnityGfx"],
      "30": ["UnityMultiRende", "UnityPreload"],
      "3F": ["UnityChoreograp", "AsyncReadManage", "Worker Thread", "NativeThread", "FMOD"],
      "F": ["MIHOYO_NETWORK", "Audio", "tp_schedule"]
    },
    "other": "f"
  },
  "affinity": {
    "interval": 1000,
    "unity_main": "80",
    "heavy_thread": "UnityGfx",
    "heavy_mask": "40",
    "comm": {
      "30": ["UnityPreload", "FMOD", "UnityChoreograp", "NativeThread", "Worker Thread"],
      "20": ["UnityMultiRende"],
      "F": [
        "mali-event-", "AsyncReadManage",
        "Audio", "tp_schedule", "Binder:", "MIHOYO_NETWORK", "Thread-"
      ]
    },
    "other": "F"
  },
  "modes": [
    {
      "mode": ["powersave"],
      "call": [
        ["@sched_limit", "0 0", "0 8000", "0 8000"],
        ["@limiters", "ys-powersave:cpu4", "ys-powersave:cpu7"],
        ["@gpu_freq", "min", "500000"]
      ],
      "booster": {
        "events": ["presets"],
        "duration": 20000,
        "idle_delay": 20000,
        "enter": [
          ["$uclamp_fg_max", "max"], ["$uclamp_top_max", "max"], ["$uclamp_bg_max", "max"], ["$cpuset_top", "0-7"]
        ],
        "exit": [
          ["$cpuset_top", "1-4"], ["$uclamp_fg_max", "0.00"], ["$uclamp_top_max", "0.00"], ["$uclamp_bg_max", "0.00"]
        ]
      }
    },
    {
      "mode": ["balance"],
      "call": [
        ["@gpu_freq", "min", "608000"],
        ["$stune_top_boost", "0"],
        ["@sched_limit", "0 0", "0 8000", "0 8000"],
        ["@limiters", "ys-balance:cpu4", "ys-balance:cpu7"]
      ],
      "sensors": [
        {
          "sensor": "cpu",
          "friendly": "Common Thermal - SOC",
          "interval": 200,
          "props": ["$gpu_max_khz"],
          "rules": [
            { "threshold": [   -1, 92000], "values": ["443000000"] },
            { "threshold": [92000, 88000], "values": ["491000000"] },
            { "threshold": [88000, 83000], "values": ["540000000"] },
            { "threshold": [83000,    -1], "values": ["608000000"] }
          ]
        }
      ]
    },
    {
      "mode": ["performance"],
      "call": [
        ["$stune_top_boost", "0"], ["$stune_top_perf", "0"],
        ["@gpu_freq", "min", "608000"],
        ["@sched_limit", "0 0", "0 8000", "0 8000"],
        ["@limiters", "ys-performance:cpu4", "ys-performance:cpu7"]
      ],
      "sensors": [
        {
          "sensor": "cpu",
          "friendly": "Common Thermal - SOC",
          "interval": 200,
          "props": ["$gpu_max_khz"],
          "rules": [
            { "threshold": [   -1, 92000], "values": ["443000000"] },
            { "threshold": [92000, 88000], "values": ["491000000"] },
            { "threshold": [88000, 83000], "values": ["540000000"] },
            { "threshold": [83000, 78000], "values": ["608000000"] },
            { "threshold": [78000,    -1], "values": ["738000000"] }
          ]
        }
      ]
    },
    {
      "mode": ["fast"],
      "call": [
        ["$stune_top_boost", "0"], ["$stune_top_perf", "0"],
        ["@sched_limit", "0 0", "0 4000", "0 4000"],
        ["@gpu_freq", "min", "608000"],
        ["@limiters", "ys-fast:cpu4", "ys-fast:cpu7"]
      ],
      "sensors": [
        {
          "sensor": "cpu",
          "friendly": "Common Thermal - SOC",
          "interval": 50,
          "props": ["$gpu_max_khz"],
          "rules": [
            { "threshold": [   -1, 94500], "values": ["443000000"] },
            { "threshold": [94500, 90000], "values": ["491000000"] },
            { "threshold": [90000, 85000], "values": ["540000000"] },
            { "threshold": [85000, 80000], "values": ["608000000"] },
            { "threshold": [80000,    -1], "values": ["738000000"] }
          ]
        }
      ]
    },
    {
      "mode": ["pedestal"],
      "call": [
        ["$stune_top_boost", "0"], ["$stune_top_perf", "0"],
        ["@gpu_freq", "min", "738000"],
        ["@limiters", "ys-fast:cpu4", "ys-fast:cpu7"]
      ],
      "sensors": [
        {
          "sensor": "cpu",
          "friendly": "Common Thermal - SOC",
          "interval": 50,
          "props": ["$gpu_max_khz"],
          "rules": [
            { "threshold": [   -1, 94600], "values": ["491000000"] },
            { "threshold": [94500, 90800], "values": ["540000000"] },
            { "threshold": [90700, 85100], "values": ["608000000"] },
            { "threshold": [85000, 80100], "values": ["608000000"] },
            { "threshold": [80000,    -1], "values": ["738000000"] }
          ]
        }
      ]
    }
  ]
}